import{d as S,r as d,e as U,c as a,a as e,F as b,h,p as r,k as v,v as c,t as u,q as R,s as B,x as y,o,_ as D}from"./index-DEc4n1eP.js";const F={class:"review-publish"},I={class:"steps"},M={class:"step-content"},N={key:0,class:"step-1"},P={class:"search-box"},T={class:"course-list"},$=["onClick"],q={key:1,class:"step-2"},z={class:"rating-section"},E={class:"star-rating"},L=["onClick"],j={class:"radar-ratings"},A={class:"rating-item"},G={class:"rating-item"},H={class:"rating-item"},J={key:2,class:"step-3"},K={class:"char-count"},O={class:"actions"},Q=["disabled"],W=["disabled"],X=S({__name:"ReviewPublish",setup(Y){const p=["选择课程","评分","撰写评价"],n=d(0),k=d([]),m=d(null),g=d(""),l=d({course_id:0,rating:3,difficulty:3,grading:3,harvest:3,content:""}),f=async()=>{const i=await R(g.value);k.value=i.courses},x=i=>{m.value=i,l.value.course_id=i.id,C()},C=()=>{n.value<p.length-1&&n.value++},w=()=>{n.value>0&&n.value--},V=async()=>{try{await B(l.value),alert("评价提交成功！")}catch(i){console.error("提交失败:",i),alert("评价提交失败，请重试")}};return U(f),(i,s)=>(o(),a("div",F,[e("div",I,[(o(),a(b,null,h(p,(t,_)=>e("div",{key:_,class:y(["step",{active:n.value===_}])},u(t),3)),64))]),e("div",M,[n.value===0?(o(),a("div",N,[e("div",P,[v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>g.value=t),type:"text",placeholder:"搜索课程...",onInput:f},null,544),[[c,g.value]])]),e("div",T,[(o(!0),a(b,null,h(k.value,t=>(o(),a("div",{key:t.id,class:y(["course-item",{selected:m.value?.id===t.id}]),onClick:_=>x(t)},[e("h3",null,u(t.name),1),e("span",null,u(t.department),1)],10,$))),128))])])):r("",!0),n.value===1?(o(),a("div",q,[e("div",z,[s[5]||(s[5]=e("h3",null,"总体评分",-1)),e("div",E,[(o(),a(b,null,h(5,t=>e("span",{key:t,class:y(["star",{active:t<=l.value.rating}]),onClick:_=>l.value.rating=t}," ★ ",10,L)),64))])]),e("div",j,[e("div",A,[s[6]||(s[6]=e("label",null,"课程难度",-1)),v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>l.value.difficulty=t),type:"range",min:"1",max:"5",step:"0.5"},null,512),[[c,l.value.difficulty,void 0,{number:!0}]]),e("span",null,u(l.value.difficulty),1)]),e("div",G,[s[7]||(s[7]=e("label",null,"给分情况",-1)),v(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>l.value.grading=t),type:"range",min:"1",max:"5",step:"0.5"},null,512),[[c,l.value.grading,void 0,{number:!0}]]),e("span",null,u(l.value.grading),1)]),e("div",H,[s[8]||(s[8]=e("label",null,"学习收获",-1)),v(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>l.value.harvest=t),type:"range",min:"1",max:"5",step:"0.5"},null,512),[[c,l.value.harvest,void 0,{number:!0}]]),e("span",null,u(l.value.harvest),1)])])])):r("",!0),n.value===2?(o(),a("div",J,[s[9]||(s[9]=e("h3",null,"撰写评价",-1)),v(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=t=>l.value.content=t),placeholder:"请写下你对这门课程的评价...",rows:"8"},null,512),[[c,l.value.content]]),e("div",K,u(l.value.content.length)+"/500",1)])):r("",!0)]),e("div",O,[n.value>0?(o(),a("button",{key:0,class:"btn-prev",onClick:w},"上一步")):r("",!0),n.value<p.length-1?(o(),a("button",{key:1,class:"btn-next",disabled:!m.value&&n.value===0,onClick:C}," 下一步 ",8,Q)):r("",!0),n.value===p.length-1?(o(),a("button",{key:2,class:"btn-submit",disabled:!l.value.content,onClick:V}," 提交评价 ",8,W)):r("",!0)])]))}}),ee=D(X,[["__scopeId","data-v-957befbc"]]);export{ee as default};
